parameters:
  key: 'build_cache_v1'
  workspace: '/opt/underlay_ws'
  path: '/opt/underlay_ws/build/*'

steps:
- task: CacheBeta@0
  inputs:
    key: >-
      "${{parameters.key}}" |
      "$(Agent.OS)" |
      "$(Agent.OSArchitecture)" |
      "${{parameters.workspace}}/checksum.txt"
    path: ${{parameters.path}}
  displayName: Cache ${{parameters.key}}
